{"version":3,"file":"mega-menu-nav/view.js","mappings":"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","sources":["webpack://simple-mega-menu/./src/mega-menu-nav/view.js"],"sourcesContent":["/**\n * Use this file for JavaScript code that you want to run in the front-end\n * on posts/pages that contain this block.\n *\n * When this file is defined as the value of the `viewScript` property\n * in `block.json` it will be enqueued on the front end of the site.\n *\n * Example:\n *\n * ```js\n * {\n *   \"viewScript\": \"file:./view.js\"\n * }\n * ```\n *\n * If you're not making any changes to this file because your project doesn't need any\n * JavaScript running in the front-end, then you should delete this file and remove\n * the `viewScript` property from `block.json`.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script\n */\n\n\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\n\n    //* Get the width of the scrollbar\n\tconst getScrollbarWidth= () => {\n\t\t// *Check if the document has a vertical scrollbar\n\t\tconst hasVerticalScrollbar = document.documentElement.scrollHeight > window.innerHeight\n\n\t\tif (!hasVerticalScrollbar) return 0\n\n\t\t//* Create a temporary div container and append it into the body\n\t\tconst container = document.createElement('div')\n\t\t//* Force scrollbar\n\t\tcontainer.style.overflow = 'scroll'\n\t\tcontainer.style.width = '50px'\n\t\tcontainer.style.height = '50px'\n\t\tcontainer.style.visibility = 'hidden'\n\t\tdocument.body.appendChild(container)\n\n\t\t//* Calculate the width of the scrollbar\n\t\tconst scrollbarWidth = container.offsetWidth - container.clientWidth\n\n\t\t//* Remove the temporary div container from the body\n\t\tdocument.body.removeChild(container)\n\n\t\t//* Return the scrollbar width\n\t\treturn scrollbarWidth\n\t}\n\n\tconst setScrollbarWidth= () => {\n\t\tdocument.documentElement.style.setProperty('--scrollbar-width', `${getScrollbarWidth()}px`)\n\t}\n\tsetScrollbarWidth()\n\n\n    const smmNavs = document.querySelectorAll('nav.simple-mega-menu')\n    if(smmNavs.length > 0) {\n        smmNavs.forEach(smmNav => {\n\n            //* Get the header element\n            const header = smmNav.closest('header') || smmNav.querySelector('.site-header') || smmNav.querySelector('#masthead')\n\n            //* Get the breakpoint value\n            const smmNavStyle = getComputedStyle(smmNav)\n            const smmBreakpoint = smmNavStyle.getPropertyValue('--mega-menu-breakpoint').trim()\n\t\t\tconst megaMenuInputs = smmNav.querySelectorAll('input[id^=\"mega-menu-\"]')\n\t\t\tconst burgerInput = smmNav.querySelector('input[id^=\"burger-input-smm-\"]')\n            let isMobileView = undefined\n\n            //* Add a resize observer to the header element\n            const navResizeObserver = new ResizeObserver(entries => {\n                document.documentElement.style.setProperty('--smm-nav-height', Math.round(entries[0].contentRect.height) + 'px')\n                isCurrentlyMobileView = entries[0].contentRect.width <= parseInt(smmBreakpoint)\n\n\t\t\t\t//* Auto-close opened burger menu and mega menu items when changing from mobile to desktop\n\t\t\t\tif(isMobileView !== isCurrentlyMobileView) {\n\t\t\t\t\tmegaMenuInputs.forEach(input => input.checked = false)\n\t\t\t\t\tburgerInput.checked = false\n\t\t\t\t\tisMobileView = isCurrentlyMobileView\n\t\t\t\t}\n            })\n            navResizeObserver.observe(header)\n\n\t\t\tconst setMMheight = (mmItem) => {\n\t\t\t\tconst height = mmItem.firstElementChild.scrollHeight\n\t\t\t\tif(height > 0) mmItem.style.setProperty('--mega-menu-height', `${height}px`)\n\t\t\t}\n\n\t\t\tconst smmLiItems = smmNav.querySelectorAll('.smm-item')\n\t\t\tsmmLiItems.forEach(liItem => {\n\t\t\t\tconst megaMenuItem = liItem.querySelector('div.wp-block-simple-mega-menu-mega-menu-item')\n\t\t\t\tif (megaMenuItem) {\n\t\t\t\t\tconst menuItemResizeObserver = new ResizeObserver(entries => setMMheight(entries[0].target))\n\t\t\t\t\tmenuItemResizeObserver.observe(megaMenuItem)\n\t\t\t\t\tsetMMheight(megaMenuItem)\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t//* Autoclose mega menu items\n\t\t\tif(smmNav.dataset.autoclose === 'true') {\n\t\t\t\tmegaMenuInputs.forEach(input => {\n\t\t\t\t\tinput.addEventListener('change', () => {\n\t\t\t\t\tif (input.checked && isMobileView) {\n\t\t\t\t\t\tmegaMenuInputs.forEach(otherInput => {\n\t\t\t\t\t\t\tif (otherInput !== input) {\n\t\t\t\t\t\t\t\totherInput.checked = false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t}\n\n        })\n    }\n\n})\n"],"names":["document","addEventListener","getScrollbarWidth","hasVerticalScrollbar","documentElement","scrollHeight","window","innerHeight","container","createElement","style","overflow","width","height","visibility","body","appendChild","scrollbarWidth","offsetWidth","clientWidth","removeChild","setScrollbarWidth","setProperty","smmNavs","querySelectorAll","length","forEach","smmNav","header","closest","querySelector","smmNavStyle","getComputedStyle","smmBreakpoint","getPropertyValue","trim","megaMenuInputs","burgerInput","isMobileView","undefined","navResizeObserver","ResizeObserver","entries","Math","round","contentRect","isCurrentlyMobileView","parseInt","input","checked","observe","setMMheight","mmItem","firstElementChild","smmLiItems","liItem","megaMenuItem","menuItemResizeObserver","target","dataset","autoclose","otherInput"],"sourceRoot":""}